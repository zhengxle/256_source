#
# $Id: Makefile.all,v 1.1 1997/11/20 03:17:20 gray Exp $
#

HFLS	= conn.h
OBJS	= conn.o rawio.o

CC	= cc
CFLAGS	= -g -I.
LDFLAGS	=
RANLIB	= ranlib

DESTDIR	= /usr/local
TEST	= conn_t
LIBRARY	= libconn.a

all : $(LIBRARY)

clean :
	rm -f a.out core *.o *.t
	rm -f $(LIBRARY) $(TEST)

install : $(HFLS) $(LIBRARY)
	install -c -m 444 $(HFLS) $(DESTDIR)/inc
	install -c -m 644 $(LIBRARY) $(DESTDIR)/lib
	$(RANLIB) $(DESTDIR)/lib/$(LIBRARY)

$(LIBRARY) : $(OBJS)
	ar cr $(LIBRARY) $?
	$(RANLIB) $@

tests : $(TEST)

$(TEST) : $(TEST).o $(LIBRARY)
	rm -f $@
	$(CC) $(LDFLAGS) $(TEST).o $(LIBRARY)
	mv a.out $@

.c.o :
	rm -f $@
	$(CC) $(CFLAGS) -c $< -o $@

#
# Below are dependencies that are automatically generated by make
# depend.  Please do not edit by hand.
#

conn.o: conn.c conn.h conn_loc.h rawio.h
conn_t.o: conn_t.c conn.h
rawio.o: rawio.c rawio.h
